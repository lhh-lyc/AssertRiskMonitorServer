<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.lhh.serverinfocommon.dao.scan.ScanProjectContentDao">

    <sql id="baseColumn">
        id,
        project_id,
        input_host
    </sql>

    <select id="queryPage" resultType="com.lhh.serverbase.entity.ScanProjectContentEntity">
        select
        <include refid="baseColumn"/>
        from scan_project_content
    </select>

    <select id="queryList" resultType="com.lhh.serverbase.entity.ScanProjectContentEntity">
        select t1.* from scan_project_content t1
        join scan_project t2 on t2.id = t1.project_id
        where t1.del_flg = 0
        <if test="userId != null and userId != ''">
            and t2.user_id = #{userId}
        </if>
        <if test="projectId != null and projectId != ''">
            and t1.project_id = #{projectId}
        </if>
        <if test="isCompleted != null and isCompleted != ''">
            and t2.is_completed = #{isCompleted}
        </if>
    </select>


</mapper>